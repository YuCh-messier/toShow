import{e as y,f as C,g as f,R as l,b as o,j as a,c as i,h as r,a as x,d as p}from"./index.7861a158.js";import{C as w}from"./calendar.53e6209d.js";var c=y("date"),d;c?d=c:d=C();var u=f("user"),h=null,m=function(e,t){h=setTimeout(n=>{M(e)},500)},v=function(e){clearTimeout(h),h=null},b=function(e){return clearTimeout(h),!1};function M(e){var t=window.confirm("delete or not?");t&&i.post(r+"/users/deleteAccount",{id:e}).then(n=>{window.location.reload()})}function N(e){return a(w,{size:"2em",onClick:t=>{x("/src/pages/calendar.html?type=account")}})}function T(e){var t=new Date().getDate(),n=e.tM,s=e.tD,g=(n/t).toFixed(2);return o("div",{className:"containerB text-font3 w-fit gap-y-sm",children:[o("div",{children:["TD:",s]}),o("div",{children:["TM:",n]}),o("div",{children:["AM:",g]})]})}function k(e){return a("button",{className:"button shadow",onClick:e.showCard,children:"add"})}function D(e){return o("div",{className:"z-10 bg-white absolute containerB",style:{width:"calc(100vw)",height:"calc(80vh)"},children:[a("input",{placeholder:"\u4EF7\u683C",value:e.value,onChange:e.onType,className:"py-md w-4/5 border-lightB border-b text-font3 text-black outline-none",type:"number"}),a("input",{placeholder:"\u5907\u6CE8",value:e.value2,onChange:e.onType2,className:"py-md w-4/5 border-lightB border-b text-font3 text-black outline-none",type:"text"}),a("button",{className:"button3 bg-primaryL text-white mt-xxl",onClick:e.addWord,children:"\u786E\u5B9A"}),a("button",{className:"button3 bg-succeed text-white mt-xxl",onClick:e.backWord,children:"\u8FD4\u56DE"})]})}class W extends l.Component{constructor(t){super(t),this.state={money:t.money,text:t.text}}render(){return o("div",{className:"py-sm ml-xl text-font3 containerA justify-around",onMouseDown:t=>{m(this.props.id)},onMouseMove:v,onMouseUp:b,onTouchStart:t=>{m(this.props.id)},onTouchMove:v,onTouchEnd:b,children:[a("div",{children:this.state.money}),a("div",{children:this.state.text})]})}}class S extends l.Component{constructor(t){super(t),this.state={itemList:[],addOrNot:!1,value:"",value2:"\u5907\u6CE8",month:new Date().getMonth()+1,monthM:0,dayM:0},this.addWord=this.addWord.bind(this),this.showCard=this.showCard.bind(this),this.backWord=this.backWord.bind(this),this.handleChange=this.handleChange.bind(this),this.handleChange2=this.handleChange2.bind(this)}componentDidMount(){i.get(r+`/users/account?user=${u}&time=${d}`).then(t=>{let n=0;t.data.forEach(s=>{n+=Number(s.money)}),this.setState({itemList:t.data,dayM:n})}),i.get(r+`/users/accountM?user=${u}&month=${this.state.month}`).then(t=>{this.setState({monthM:t.data[0]["sum(money)"]})})}showCard(){this.setState({addOrNot:!0})}backWord(){this.setState({addOrNot:!1})}handleChange(t){this.setState({value:t.target.value})}handleChange2(t){this.setState({value2:t.target.value})}addWord(){var t=this.state.itemList;t.push({money:this.state.value,text:this.state.value2,id:99}),i.post(r+"/users/addAccount",{user:u,time:d,money:this.state.value,text:this.state.value2,month:this.state.month}),this.setState({itemList:t,addOrNot:!1,value:"",value2:"\u5907\u6CE8"})}render(){var t=this.state.itemList.map(s=>a(W,{money:s.money,text:s.text,id:s.id},s.id.toString()+s.text));if(this.state.addOrNot==!0)var n=a(D,{addWord:this.addWord,backWord:this.backWord,value:this.state.value,value2:this.state.value2,onType:this.handleChange,onType2:this.handleChange2});else var n=null;return o("div",{children:[n,o("div",{className:"containerA justify-around py-sm mb-sm bg-primaryH",children:[a(N,{}),a(T,{tM:this.state.monthM,tD:this.state.dayM}),a(k,{showCard:this.showCard})]}),a("div",{children:t})]})}}function E(){return a(S,{})}p.createRoot(document.getElementById("root")).render(a(l.StrictMode,{children:a(E,{})}));
