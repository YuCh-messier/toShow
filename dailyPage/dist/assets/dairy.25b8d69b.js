import{e as p,f as v,g as b,R as l,b as s,j as e,c as o,h as d,a as f,i as g,d as w}from"./index.7861a158.js";import{C as y}from"./calendar.53e6209d.js";var u=p("date"),n;u?n=u:n=v();var c=b("user");function C(i){return e(y,{size:"2em",onClick:t=>{f("/src/pages/calendar.html?type=dairy")}})}function x(i){return e("button",{className:"button shadow",onClick:i.showCard,children:"add"})}function N(i){function t(){var r="../public/pics/dairy/";let a=new FormData,h=g(16)+".png",m=document.getElementById("file").files[0];a.append("file",m),o({method:"post",url:`${d}/uploadFile?destination=${r}&fileName=${h}`,data:a}).then(S=>{window.location.reload()}),o.post(d+"/users/addDairy",{user:c,time:n,content:d+"/pics/dairy/"+h,tap:1})}return s("div",{children:[e("button",{className:"button shadow",onClick:i.addPic,children:"addP"}),e("div",{children:e("input",{type:"file",id:"file",onChange:t,accept:"image/*",hidden:!0})})]})}function k(i){return s("div",{className:"z-10 bg-white absolute containerB",style:{width:"calc(100vw)",height:"calc(80vh)"},children:[e("input",{value:i.value,onChange:i.onType,className:"py-md w-4/5 border-lightB border-b text-font3 text-black outline-none",type:"text"}),e("button",{className:"button3 bg-primaryL text-white mt-xxl",onClick:i.addWord,children:"\u786E\u5B9A"}),e("button",{className:"button3 bg-succeed text-white mt-xxl",onClick:i.backWord,children:"\u8FD4\u56DE"})]})}class P extends l.Component{constructor(t){super(t),this.state={content:t.content,tap:t.tap},this.viewPic=this.viewPic.bind(this)}viewPic(t){window.location=t}render(){return this.state.tap==0?s("div",{children:[e("div",{className:"w-fit ml-xl tips",children:this.props.times}),e("div",{className:"py-sm ml-xl text-font3",children:this.state.content})]}):s("div",{children:[e("div",{className:"w-fit ml-xl tips",children:this.props.times}),e("img",{className:"py-sm w-3/5 ml-xl rounded",src:this.state.content,onClick:t=>{this.viewPic(this.state.content,t)}})]})}}class W extends l.Component{constructor(t){super(t),this.state={itemList:[],addOrNot:!1,value:""},this.addWord=this.addWord.bind(this),this.showCard=this.showCard.bind(this),this.backWord=this.backWord.bind(this),this.handleChange=this.handleChange.bind(this),this.addPic=this.addPic.bind(this)}componentDidMount(){o.get(d+`/users/dairy?user=${c}&time=${n}`).then(t=>{this.setState({itemList:t.data})})}showCard(){this.setState({addOrNot:!0})}backWord(){this.setState({addOrNot:!1})}handleChange(t){this.setState({value:t.target.value})}addWord(){var t=this.state.itemList;t.push({content:this.state.value,tap:0}),o.post(d+"/users/addDairy",{user:c,time:n,content:this.state.value,tap:0}),this.setState({itemList:t,addOrNot:!1,value:""})}addPic(){document.getElementById("file").click()}render(){var t=this.state.itemList.map(a=>e(P,{content:a.content,tap:a.tap,times:a.times},a.content));if(this.state.addOrNot==!0)var r=e(k,{addWord:this.addWord,backWord:this.backWord,value:this.state.value,onType:this.handleChange});else var r=null;return s("div",{children:[r,s("div",{className:"containerA justify-around py-sm mb-sm bg-primaryH",children:[e(C,{}),e(x,{showCard:this.showCard}),e(N,{addPic:this.addPic})]}),e("div",{children:t})]})}}function B(){return e(W,{})}w.createRoot(document.getElementById("root")).render(e(l.StrictMode,{children:e(B,{})}));
