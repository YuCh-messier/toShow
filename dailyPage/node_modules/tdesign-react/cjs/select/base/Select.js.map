{"version":3,"file":"Select.js","sources":["../../../src/select/base/Select.tsx"],"sourcesContent":["import React, { useState, useEffect, Ref, useMemo, useCallback } from 'react';\nimport classNames from 'classnames';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport useControlled from '../../hooks/useControlled';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport forwardRefWithStatics from '../../_util/forwardRefWithStatics';\nimport { getSelectValueArr, getValueToOption } from '../util/helper';\nimport noop from '../../_util/noop';\nimport FakeArrow from '../../common/FakeArrow';\nimport Loading from '../../loading';\nimport SelectInput from '../../select-input';\nimport Option from './Option';\nimport OptionGroup from './OptionGroup';\nimport PopupContent from './PopupContent';\nimport Tag from '../../tag';\nimport { TdSelectProps, TdOptionProps, SelectOption, SelectValueChangeTrigger } from '../type';\nimport { StyledProps } from '../../common';\nimport { selectDefaultProps } from '../defaultProps';\nimport { PopupVisibleChangeContext } from '../../popup';\n\nexport interface SelectProps extends TdSelectProps, StyledProps {\n  // 子节点\n  children?: React.ReactNode;\n  onMouseEnter?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\ntype OptionsType = TdOptionProps[];\n\nconst Select = forwardRefWithStatics(\n  (props: SelectProps, ref: Ref<HTMLDivElement>) => {\n    // 国际化文本初始化\n    const [local, t] = useLocaleReceiver('select');\n    const emptyText = t(local.loadingText);\n\n    const {\n      readonly,\n      borderless,\n      autoWidth,\n      creatable,\n      filter,\n      loadingText = emptyText,\n      max,\n      popupProps,\n      reserveKeyword,\n      className,\n      style,\n      disabled,\n      size,\n      multiple,\n      placeholder,\n      clearable,\n      prefixIcon,\n      options,\n      filterable,\n      loading,\n      onFocus,\n      onBlur,\n      onClear = noop,\n      onCreate,\n      onRemove,\n      onSearch,\n      empty,\n      valueType,\n      keys,\n      children,\n      collapsedItems,\n      minCollapsedNum,\n      valueDisplay,\n      onEnter,\n      showArrow,\n      inputProps,\n      panelBottomContent,\n      panelTopContent,\n      selectInputProps,\n      tagInputProps,\n      tagProps,\n    } = props;\n\n    const [value, onChange] = useControlled(props, 'value', props.onChange);\n    const { classPrefix } = useConfig();\n    const { overlayClassName, ...restPopupProps } = popupProps || {};\n\n    const name = `${classPrefix}-select`; // t-select\n\n    const [showPopup, setShowPopup] = useControlled(props, 'popupVisible', props.onPopupVisibleChange);\n    const [inputValue, onInputChange] = useControlled(props, 'inputValue', props.onInputChange);\n    const [currentOptions, setCurrentOptions] = useState([]);\n    const [tmpPropOptions, setTmpPropOptions] = useState([]);\n    const [valueToOption, setValueToOption] = useState({});\n    const [selectedOptions, setSelectedOptions] = useState([]);\n\n    // 处理设置 option 的逻辑\n    useEffect(() => {\n      if (keys) {\n        // 如果有定制 keys 先做转换\n        const transformedOptions = options?.map((option) => ({\n          ...option,\n          value: get(option, keys?.value || 'value'),\n          label: get(option, keys?.label || 'label'),\n        }));\n        setCurrentOptions(transformedOptions);\n        setTmpPropOptions(transformedOptions);\n      } else {\n        setCurrentOptions(options);\n        setTmpPropOptions(options);\n      }\n      setValueToOption(getValueToOption(children, options, keys) || {});\n    }, [options, keys, children]);\n\n    // 同步 value 对应的 options\n    useEffect(() => {\n      setSelectedOptions((oldSelectedOptions) => {\n        const valueKey = keys?.value || 'value';\n        const labelKey = keys?.label || 'label';\n        if (Array.isArray(value)) {\n          return value\n            .map((item) => {\n              if (valueType === 'value') {\n                return (\n                  valueToOption[item as string | number] ||\n                  oldSelectedOptions.find((option) => get(option, valueKey) === item) || {\n                    [valueKey]: item,\n                    [labelKey]: item,\n                  }\n                );\n              }\n              return item;\n            })\n            .filter(Boolean);\n        }\n\n        if (value !== undefined && value !== null) {\n          if (valueType === 'value') {\n            return [\n              valueToOption[value as string | number] ||\n                oldSelectedOptions.find((option) => get(option, valueKey) === value) || {\n                  [valueKey]: value,\n                  [labelKey]: value,\n                },\n            ].filter(Boolean);\n          }\n          return [value];\n        }\n        return [];\n      });\n    }, [value, keys, valueType, valueToOption]);\n\n    const selectedLabel = useMemo(() => {\n      if (multiple) {\n        return selectedOptions.map((selectedOption) => get(selectedOption || {}, keys?.label || 'label') || '');\n      }\n      return get(selectedOptions[0] || {}, keys?.label || 'label') || undefined;\n    }, [selectedOptions, keys, multiple]);\n\n    const handleShowPopup = (visible: boolean, ctx: PopupVisibleChangeContext) => {\n      if (disabled) return;\n      setShowPopup(visible, ctx);\n      visible && onInputChange('');\n    };\n\n    // 可以根据触发来源，自由定制标签变化时的筛选器行为\n    const onTagChange = (_currentTags, context) => {\n      const { trigger, index, item, e } = context;\n      // backspace\n      if (trigger === 'backspace') {\n        e.stopPropagation();\n\n        let closest = -1;\n        let len = index;\n        while (len >= 0) {\n          if (!selectedOptions[len]?.disabled) {\n            closest = len;\n            break;\n          }\n          len -= 1;\n        }\n        if (closest < 0) {\n          return;\n        }\n        const values = getSelectValueArr(value, value[closest], true, valueType, keys);\n        onChange(values, { e, trigger, selectedOptions: [] });\n        return;\n      }\n\n      if (trigger === 'clear') {\n        e.stopPropagation();\n        // TODO: selectedOptions\n        onChange([], { e, trigger, selectedOptions: [] });\n        return;\n      }\n\n      if (trigger === 'tag-remove') {\n        e.stopPropagation();\n        const values = getSelectValueArr(value, value[index], true, valueType, keys);\n        onChange(values, { e, trigger, selectedOptions: [] });\n        if (isFunction(onRemove)) {\n          onRemove({\n            value: value[index],\n            data: {\n              label: item,\n              value: value[index],\n            },\n            e,\n          });\n        }\n      }\n    };\n\n    // 选中 Popup 某项\n    const handleChange = (\n      value: string | number,\n      context: { e: React.MouseEvent<HTMLLIElement>; trigger: SelectValueChangeTrigger },\n    ) => {\n      if (multiple) {\n        !reserveKeyword && onInputChange('', { trigger: 'clear' });\n      }\n      if (creatable && isFunction(onCreate)) {\n        if ((options as OptionsType).filter((option) => option.value === value).length === 0) {\n          onCreate(value);\n        }\n      }\n      onChange?.(value, { ...context, selectedOptions: [] });\n    };\n\n    // 处理filter逻辑\n    const handleFilter = (value: string) => {\n      let filteredOptions: OptionsType = [];\n      if (!value) {\n        setCurrentOptions(tmpPropOptions);\n        return;\n      }\n\n      if (filter && isFunction(filter)) {\n        // 如果有自定义的filter方法 使用自定义的filter方法\n        if (Array.isArray(tmpPropOptions)) {\n          filteredOptions = tmpPropOptions.filter((option) => filter(value, option));\n        } else if (Array.isArray(Object.values(valueToOption))) {\n          filteredOptions = Object.values(valueToOption).filter((option) => filter(value, option));\n        }\n      } else if (Array.isArray(tmpPropOptions)) {\n        const upperValue = value.toUpperCase();\n        filteredOptions = tmpPropOptions.filter((option) => (option?.label || '').toUpperCase().includes(upperValue)); // 不区分大小写\n      }\n\n      if (creatable) {\n        filteredOptions = filteredOptions.concat([{ label: value, value }]);\n      }\n      setCurrentOptions(filteredOptions);\n    };\n\n    // 处理输入框逻辑\n    const handleInputChange = (value: string) => {\n      onInputChange(value);\n      if (value === undefined) return;\n\n      if (isFunction(onSearch)) {\n        onSearch(value);\n        return;\n      }\n    };\n\n    const onClearValue = (context) => {\n      context.e.stopPropagation();\n      if (Array.isArray(value)) {\n        onChange([], context);\n      } else {\n        onChange(null, context);\n      }\n      onInputChange(undefined);\n      onClear(context);\n    };\n\n    useEffect(() => {\n      if (typeof inputValue !== 'undefined') {\n        handleFilter(String(inputValue));\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [inputValue]);\n\n    // 渲染后置图标\n    const renderSuffixIcon = () => {\n      if (loading) {\n        return (\n          <Loading className={classNames(`${name}__right-icon`, `${name}__active-icon`)} loading={true} size=\"small\" />\n        );\n      }\n\n      return (\n        showArrow && <FakeArrow overlayClassName={`${name}__right-icon`} isActive={showPopup} disabled={disabled} />\n      );\n    };\n\n    // 渲染主体内容\n    const renderContent = () => {\n      const popupContentProps = {\n        onChange: handleChange,\n        value,\n        className,\n        size,\n        multiple,\n        showPopup,\n        // popup弹出层内容只会在点击事件之后触发 并且无任何透传参数\n        setShowPopup: (show) => handleShowPopup(show, {}),\n        options: currentOptions,\n        empty,\n        max,\n        loadingText,\n        loading,\n        valueType,\n        keys,\n        panelBottomContent,\n        panelTopContent,\n      };\n      return <PopupContent {...popupContentProps}>{children}</PopupContent>;\n    };\n\n    const renderValueDisplay = () => {\n      if (!valueDisplay) {\n        if (!multiple) {\n          if (typeof selectedLabel !== 'string') {\n            return selectedLabel;\n          }\n          return '';\n        }\n        return ({ value: val }) =>\n          val.slice(0, minCollapsedNum ? minCollapsedNum : val.length).map((v: string, key: number) => {\n            const filterOption: SelectOption & { disabled?: boolean } = options?.find((option) => option.label === v);\n            return (\n              <Tag\n                key={key}\n                closable={!filterOption?.disabled && !disabled}\n                {...tagProps}\n                onClose={({ e }) => {\n                  e.stopPropagation();\n                  const values = getSelectValueArr(value, value[key], true, valueType, keys);\n                  onChange(values, null);\n                  tagProps?.onClose?.({ e });\n                }}\n              >\n                {v}\n              </Tag>\n            );\n          });\n      }\n      if (typeof valueDisplay === 'string') {\n        return valueDisplay;\n      }\n      if (multiple) {\n        return ({ onClose }) => valueDisplay({ value: selectedLabel, onClose });\n      }\n      return selectedLabel.length ? (valueDisplay({ value: selectedLabel[0], onClose: noop }) as string) : '';\n    };\n\n    const renderCollapsedItems = useMemo(\n      () =>\n        collapsedItems\n          ? () =>\n              collapsedItems({\n                value: selectedLabel,\n                collapsedSelectedItems: selectedLabel.slice(minCollapsedNum, selectedLabel.length),\n                count: selectedLabel.length - minCollapsedNum,\n              })\n          : null,\n      [selectedLabel, collapsedItems, minCollapsedNum],\n    );\n\n    // 将第一个选中的 option 置于列表可见范围的最后一位\n    const updateScrollTop = useCallback(\n      (content: HTMLDivElement) => {\n        const firstSelectedNode: HTMLDivElement = content.querySelector(`.${classPrefix}-is-selected`);\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      },\n      [classPrefix],\n    );\n\n    const { onMouseEnter, onMouseLeave } = props;\n\n    return (\n      <div\n        className={classNames(`${name}__wrap`, className)}\n        style={style}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        <SelectInput\n          autoWidth={!style?.width && autoWidth}\n          ref={ref}\n          className={name}\n          readonly={readonly}\n          allowInput={(filterable ?? local.filterable) || isFunction(filter)}\n          multiple={multiple}\n          value={selectedLabel}\n          valueDisplay={renderValueDisplay()}\n          clearable={clearable}\n          disabled={disabled}\n          status={props.status}\n          tips={props.tips}\n          borderless={borderless}\n          label={prefixIcon}\n          suffixIcon={renderSuffixIcon()}\n          panel={renderContent()}\n          placeholder={!multiple && showPopup && selectedLabel ? selectedLabel : placeholder || t(local.placeholder)}\n          inputValue={inputValue}\n          tagInputProps={{\n            ...tagInputProps,\n          }}\n          tagProps={tagProps}\n          inputProps={{\n            size,\n            ...inputProps,\n          }}\n          minCollapsedNum={minCollapsedNum}\n          collapsedItems={renderCollapsedItems}\n          updateScrollTop={updateScrollTop}\n          popupProps={{\n            overlayClassName: [`${name}__dropdown`, overlayClassName],\n            ...restPopupProps,\n          }}\n          popupVisible={showPopup}\n          onPopupVisibleChange={handleShowPopup}\n          onTagChange={onTagChange}\n          onInputChange={handleInputChange}\n          onFocus={onFocus}\n          onEnter={onEnter}\n          onBlur={onBlur}\n          onClear={(context) => {\n            onClearValue(context);\n          }}\n          {...selectInputProps}\n        />\n      </div>\n    );\n  },\n  {\n    Option,\n    OptionGroup,\n  },\n);\n\nSelect.displayName = 'Select';\nSelect.defaultProps = selectDefaultProps;\n\nexport default Select;\n"],"names":["Select","forwardRefWithStatics","props","ref","useLocaleReceiver","_slicedToArray","local","t","emptyText","loadingText","readonly","borderless","autoWidth","creatable","filter","max","popupProps","reserveKeyword","className","style","disabled","size","multiple","placeholder","clearable","prefixIcon","options","filterable","loading","onFocus","onBlur","onClear","noop","onCreate","onRemove","onSearch","empty","valueType","keys","children","collapsedItems","minCollapsedNum","valueDisplay","onEnter","showArrow","inputProps","panelBottomContent","panelTopContent","selectInputProps","tagInputProps","tagProps","useControlled","onChange","value","useConfig","classPrefix","overlayClassName","restPopupProps","_objectWithoutProperties","name","onPopupVisibleChange","showPopup","setShowPopup","onInputChange","inputValue","useState","currentOptions","setCurrentOptions","tmpPropOptions","setTmpPropOptions","valueToOption","setValueToOption","selectedOptions","setSelectedOptions","useEffect","transformedOptions","map","option","get","label","getValueToOption","oldSelectedOptions","valueKey","labelKey","Array","isArray","item","find","Boolean","_defineProperty","selectedLabel","useMemo","selectedOption","handleShowPopup","visible","ctx","onTagChange","_currentTags","context","trigger","index","e","stopPropagation","closest","len","values","getSelectValueArr","isFunction","data","handleChange","length","handleFilter","filteredOptions","Object","upperValue","toUpperCase","includes","concat","handleInputChange","onClearValue","String","renderSuffixIcon","React","createElement","Loading","classNames","FakeArrow","isActive","renderContent","popupContentProps","show","PopupContent","renderValueDisplay","val","slice","v","key","filterOption","Tag","closable","onClose","renderCollapsedItems","collapsedSelectedItems","count","updateScrollTop","useCallback","content","firstSelectedNode","querySelector","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","onMouseEnter","onMouseLeave","SelectInput","width","allowInput","status","tips","suffixIcon","panel","popupVisible","Option","OptionGroup","displayName","defaultProps","selectDefaultProps"],"mappings":"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"}