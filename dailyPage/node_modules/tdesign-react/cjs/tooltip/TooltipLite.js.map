{"version":3,"file":"TooltipLite.js","sources":["../../src/tooltip/TooltipLite.tsx"],"sourcesContent":["import React, { ReactNode, useState, useRef, useEffect } from 'react';\nimport classnames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { StyledProps } from '../common';\nimport useSwitch from '../_util/useSwitch';\nimport useAnimation from '../_util/useAnimation';\nimport Portal from '../common/Portal';\nimport useConfig from '../hooks/useConfig';\nimport getPosition from '../_common/js/utils/getPosition';\nimport { TdTooltipLiteProps } from './type';\nimport { tooltipLiteDefaultProps } from './defaultProps';\nimport { getTransitionParams } from '../popup/utils/transition';\n\nexport interface TooltipLiteProps extends TdTooltipLiteProps, StyledProps {\n  children?: ReactNode;\n}\n\nconst DEFAULT_TRANSITION_TIMEOUT = 180;\n\nconst TooltipLite: React.FC<TooltipLiteProps> = (props) => {\n  const { style, className, placement, showArrow, theme, children, triggerElement, content, showShadow } = props;\n  const triggerRef = useRef(null);\n  const contentRef = useRef(null);\n  const popupRef = useRef(null);\n  const { classPrefix } = useConfig();\n  const [hover, hoverAction] = useSwitch();\n  const [position, setPosition] = useState(null);\n  const { keepFade } = useAnimation();\n\n  useEffect(() => {\n    if (triggerRef.current && contentRef.current) {\n      setPosition(getPosition(triggerRef.current, contentRef.current, placement));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [triggerRef.current, contentRef.current, placement, hover]);\n\n  const getTriggerChildren = (children) => {\n    const appendProps = {\n      ref: triggerRef,\n      onMouseEnter: hoverAction.on,\n      onMouseLeave: hoverAction.off,\n    };\n    if (!React.isValidElement(children)) {\n      return React.cloneElement(<div>{children}</div>, { ...appendProps });\n    }\n    return React.cloneElement(children, { ...appendProps });\n  };\n\n  return (\n    <div>\n      {getTriggerChildren(children || triggerElement)}\n      {hover && (\n        <Portal>\n          <CSSTransition\n            appear\n            timeout={{\n              appear: DEFAULT_TRANSITION_TIMEOUT,\n            }}\n            in={hover}\n            nodeRef={popupRef}\n            {...getTransitionParams({\n              classPrefix,\n              fadeAnimation: keepFade,\n            })}\n          >\n            <div\n              className={classnames(\n                `${classPrefix}-popup`,\n                `${classPrefix}-tooltip`,\n                {\n                  [`${classPrefix}-tooltip--${theme}`]: theme,\n                  [`${classPrefix}-tooltip--noshadow`]: !showShadow,\n                },\n                className,\n              )}\n              data-popper-placement={placement}\n              ref={popupRef}\n            >\n              <div\n                className={classnames(`${classPrefix}-popup__content`, {\n                  [`${classPrefix}-popup__content--arrow`]: showArrow,\n                })}\n                style={{\n                  position: 'absolute',\n                  left: position?.left,\n                  top: position?.top,\n                  ...style,\n                }}\n                ref={contentRef}\n              >\n                {content}\n                {showArrow && <div className={`${classPrefix}-popup__arrow`} />}\n              </div>\n            </div>\n          </CSSTransition>\n        </Portal>\n      )}\n    </div>\n  );\n};\n\nTooltipLite.displayName = 'Tooltiplite';\nTooltipLite.defaultProps = tooltipLiteDefaultProps;\n\nexport default React.memo(TooltipLite);\n"],"names":["DEFAULT_TRANSITION_TIMEOUT","TooltipLite","props","style","className","placement","showArrow","theme","children","triggerElement","content","showShadow","triggerRef","useRef","contentRef","popupRef","useConfig","classPrefix","useSwitch","_slicedToArray","hover","hoverAction","useState","position","setPosition","useAnimation","keepFade","useEffect","current","getPosition","getTriggerChildren","appendProps","ref","onMouseEnter","on","onMouseLeave","off","React","isValidElement","cloneElement","createElement","Portal","CSSTransition","appear","timeout","nodeRef","getTransitionParams","fadeAnimation","classnames","left","top","displayName","defaultProps","tooltipLiteDefaultProps","memo"],"mappings":"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"}