{"version":3,"file":"useInputNumber.js","sources":["../../src/input-number/useInputNumber.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport { InputNumberValue, TdInputNumberProps } from './type';\n// 计算逻辑，统一到 common 中，方便各框架复用（如超过 16 位的大数处理）\nimport {\n  canAddNumber,\n  canInputNumber,\n  canReduceNumber,\n  formatToNumber,\n  getMaxOrMinValidateResult,\n  getStepValue,\n} from '../_common/js/input-number/number';\n\n/**\n * 独立一个组件 Hook 方便用户直接使用相关逻辑 自定义任何样式的数字输入框\n */\nexport default function useInputNumber<T extends InputNumberValue = InputNumberValue>(props: TdInputNumberProps<T>) {\n  const { SIZE, STATUS } = useCommonClassName();\n  const { classPrefix } = useConfig();\n  const [value, onChange] = useControlled(props, 'value', props.onChange);\n  const [userInput, setUserInput] = useState('');\n  const [displayValue, setDisplayValue] = useState('');\n  const [isError, setIsError] = useState<'exceed-maximum' | 'below-minimum'>();\n\n  const inputRef = useRef(null);\n\n  const { max, min, largeNumber, onValidate } = props;\n\n  const disabledReduce = props.disabled || !canReduceNumber(value, props.min, props.largeNumber);\n  const disabledAdd = props.disabled || !canAddNumber(value, props.max, props.largeNumber);\n\n  const wrapClasses = classNames(`${classPrefix}-input-number`, SIZE[props.size], {\n    [STATUS.disabled]: props.disabled,\n    [`${classPrefix}-is-controls-right`]: props.theme === 'column',\n    [`${classPrefix}-input-number--${props.theme}`]: props.theme,\n    [`${classPrefix}-input-number--auto-width`]: props.autoWidth,\n  });\n\n  const reduceClasses = classNames(`${classPrefix}-input-number__decrease`, { [STATUS.disabled]: disabledReduce });\n  const addClasses = classNames(`${classPrefix}-input-number__increase`, { [STATUS.disabled]: disabledAdd });\n\n  const getUserInput = (value: InputNumberValue) => {\n    if (!value && value !== 0) return '';\n    let inputStr = value || value === 0 ? String(value) : '';\n    if (!inputRef.current.currentElement.contains?.(document.activeElement)) {\n      const num = formatToNumber(inputStr, {\n        decimalPlaces: props.decimalPlaces,\n        largeNumber: props.largeNumber,\n      });\n      inputStr = num || num === 0 ? String(num) : '';\n      if (props.format) {\n        inputStr = String(props.format(value, { fixedNumber: inputStr }));\n      }\n    }\n    return inputStr;\n  };\n\n  useEffect(() => {\n    const inputValue = [undefined, null].includes(value) ? '' : String(value);\n    setUserInput(getUserInput(inputValue));\n    // eslint-disable-next-line\n  }, [value]);\n\n  useEffect(() => {\n    // @ts-ignore\n    if ([undefined, '', null].includes(value)) return;\n    const error = getMaxOrMinValidateResult({\n      value: value as InputNumberValue,\n      max,\n      min,\n      largeNumber,\n    });\n    setIsError(error);\n    onValidate?.({ error });\n  }, [value, max, min, largeNumber, onValidate]);\n\n  const handleStepValue = (op: 'add' | 'reduce') =>\n    getStepValue({\n      op,\n      step: props.step,\n      max: props.max,\n      min: props.min,\n      lastValue: value as InputNumberValue,\n      largeNumber: props.largeNumber,\n    }) as T;\n\n  const handleReduce = (e: any) => {\n    if (disabledReduce || props.readonly) return;\n    const newValue = handleStepValue('reduce');\n    onChange(newValue, { type: 'reduce', e });\n  };\n\n  const handleAdd = (e: any) => {\n    if (disabledAdd || props.readonly) return;\n    const newValue = handleStepValue('add');\n    onChange(newValue, { type: 'add', e });\n  };\n\n  const onInnerInputChange = (val: string, ctx: { e: any }) => {\n    if (!canInputNumber(val, props.largeNumber)) return;\n    setUserInput(val);\n    const isDelete = ctx.e.inputType === 'deleteContentBackward';\n    // 大数-字符串；普通数-数字。此处是了将 2e3，2.1e3 等内容转换为数字\n    const newVal = isDelete || props.largeNumber || !val ? val : Number(val);\n    if (newVal !== value && !['-', '.', 'e', 'E'].includes(val.slice(-1))) {\n      onChange(newVal as T, { type: 'input', e: ctx.e });\n    }\n  };\n\n  const handleBlur = (value: string, ctx: { e: React.FocusEvent<HTMLDivElement, Element> }) => {\n    setUserInput(getUserInput(value));\n    const newValue = formatToNumber(value, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber,\n    });\n    console.log(getUserInput(value), newValue);\n    if (newValue !== value && String(newValue) !== value) {\n      onChange(newValue as T, { type: 'blur', e: ctx.e });\n    }\n    props.onBlur?.(newValue, ctx);\n  };\n\n  const handleFocus = (_: string, ctx: { e: React.FocusEvent<HTMLDivElement, Element> }) => {\n    setUserInput(value as string);\n    props.onFocus?.(value as string, ctx);\n  };\n\n  const handleKeydown = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    const { e } = ctx;\n    const keyEvent = {\n      ArrowUp: handleAdd,\n      ArrowDown: handleReduce,\n    };\n\n    if (keyEvent[e.key] !== undefined) {\n      keyEvent[e.key](e);\n    }\n    props.onKeydown?.(value, ctx);\n  };\n\n  const handleKeyup = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    props.onKeyup?.(value, ctx);\n  };\n\n  const handleKeypress = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    props.onKeypress?.(value, ctx);\n  };\n\n  const handleEnter = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    setUserInput(getUserInput(value));\n    const newValue = formatToNumber(value, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber,\n    });\n    if (newValue !== value && String(newValue) !== value) {\n      onChange(newValue as T, { type: 'enter', e: ctx.e });\n    }\n    props.onEnter?.(newValue, ctx);\n  };\n\n  const focus = () => {\n    inputRef.current.focus();\n  };\n\n  const blur = () => {\n    inputRef.current.blur();\n  };\n\n  const listeners = {\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    onKeydown: handleKeydown,\n    onKeyup: handleKeyup,\n    onKeypress: handleKeypress,\n    onEnter: handleEnter,\n    onClick: focus,\n  };\n\n  return {\n    classPrefix,\n    wrapClasses,\n    reduceClasses,\n    addClasses,\n    inputRef,\n    listeners,\n    displayValue,\n    setDisplayValue,\n    isError,\n    setIsError,\n    userInput,\n    setUserInput,\n    value,\n    focus,\n    blur,\n    onChange,\n    handleReduce,\n    handleAdd,\n    onInnerInputChange,\n  };\n}\n"],"names":["useInputNumber","props","useCommonClassName","SIZE","STATUS","useConfig","classPrefix","useControlled","onChange","_slicedToArray","value","useState","userInput","setUserInput","displayValue","setDisplayValue","isError","setIsError","inputRef","useRef","max","min","largeNumber","onValidate","disabledReduce","disabled","canReduceNumber","disabledAdd","canAddNumber","wrapClasses","classNames","size","_defineProperty","theme","autoWidth","reduceClasses","addClasses","getUserInput","inputStr","String","current","currentElement","contains","document","activeElement","num","formatToNumber","decimalPlaces","format","fixedNumber","useEffect","inputValue","includes","error","getMaxOrMinValidateResult","handleStepValue","op","getStepValue","step","lastValue","handleReduce","e","readonly","newValue","type","handleAdd","onInnerInputChange","val","ctx","canInputNumber","isDelete","inputType","newVal","Number","slice","handleBlur","console","log","onBlur","handleFocus","_","onFocus","handleKeydown","keyEvent","ArrowUp","ArrowDown","key","onKeydown","handleKeyup","onKeyup","handleKeypress","onKeypress","handleEnter","onEnter","focus","blur","listeners","onClick"],"mappings":"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"}