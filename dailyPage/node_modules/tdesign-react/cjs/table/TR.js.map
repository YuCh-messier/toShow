{"version":3,"file":"TR.js","sources":["../../src/table/TR.tsx"],"sourcesContent":["import React, { useMemo, useRef, MouseEvent } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport classnames from 'classnames';\nimport { formatClassNames, formatRowAttributes, formatRowClassNames } from './utils';\nimport { getRowFixedStyles, getColumnFixedStyles } from './hooks/useFixed';\nimport { RowAndColFixedPosition } from './interface';\nimport useClassName from './hooks/useClassName';\nimport TEllipsis from './Ellipsis';\nimport { BaseTableCellParams, TableRowData, RowspanColspan, TdBaseTableProps, TableScroll } from './type';\nimport useLazyLoad from './hooks/useLazyLoad';\nimport { getCellKey, SkipSpansValue } from './hooks/useRowspanAndColspan';\n\nexport interface RenderTdExtra {\n  rowAndColFixedPosition: RowAndColFixedPosition;\n  columnLength: number;\n  dataLength: number;\n  cellSpans: RowspanColspan;\n  cellEmptyContent: TdBaseTableProps['cellEmptyContent'];\n}\n\nexport interface RenderEllipsisCellParams {\n  cellNode: any;\n}\n\nexport type TrCommonProps = Pick<TdBaseTableProps, TrPropsKeys>;\n\nexport const TABLE_PROPS = [\n  'rowKey',\n  'rowClassName',\n  'columns',\n  'fixedRows',\n  'footData',\n  'rowAttributes',\n  'rowspanAndColspan',\n  'scroll',\n  'cellEmptyContent',\n  'onCellClick',\n  'onRowClick',\n  'onRowDblclick',\n  'onRowMouseover',\n  'onRowMousedown',\n  'onRowMouseenter',\n  'onRowMouseleave',\n  'onRowMouseup',\n] as const;\n\nexport type TrPropsKeys = typeof TABLE_PROPS[number];\n\nexport interface TrProps extends TrCommonProps {\n  rowKey: string;\n  row?: TableRowData;\n  rowIndex?: number;\n  ellipsisOverlayClassName: string;\n  classPrefix: string;\n  dataLength?: number;\n  rowAndColFixedPosition?: RowAndColFixedPosition;\n  skipSpansMap?: Map<string, SkipSpansValue>;\n  scrollType?: string;\n  isVirtual?: boolean;\n  rowHeight?: number;\n  trs?: Map<number, object>;\n  bufferSize?: number;\n  scroll?: TableScroll;\n  tableElm?: HTMLDivElement;\n  tableContentElm?: HTMLDivElement;\n  onRowMounted?: () => void;\n}\n\nexport const ROW_LISTENERS = ['click', 'dblclick', 'mouseover', 'mousedown', 'mouseenter', 'mouseleave', 'mouseup'];\n\nexport function renderCell(\n  params: BaseTableCellParams<TableRowData>,\n  extra?: {\n    cellEmptyContent?: TdBaseTableProps['cellEmptyContent'];\n  },\n) {\n  const { col, row, rowIndex } = params;\n  // support serial number column\n  if (col.colKey === 'serial-number') {\n    return rowIndex + 1;\n  }\n  if (isFunction(col.cell)) {\n    return col.cell(params);\n  }\n  if (isFunction(col.render)) {\n    return col.render({ ...params, type: 'cell' });\n  }\n  const r = col.cell || col.render || get(row, col.colKey);\n  // 0 和 false 属于正常可用之，不能使用兜底逻辑 cellEmptyContent\n  if (![undefined, '', null].includes(r)) return r;\n  if (extra?.cellEmptyContent) return extra.cellEmptyContent;\n  return r;\n}\n\n// 表格行组件\nexport default function TR(props: TrProps) {\n  const {\n    row,\n    rowKey,\n    rowIndex,\n    rowClassName,\n    rowAttributes,\n    dataLength,\n    fixedRows,\n    scroll,\n    tableContentElm,\n    rowAndColFixedPosition,\n  } = props;\n\n  const trRef = useRef<HTMLTableRowElement>();\n\n  const {\n    tdEllipsisClass,\n    tableBaseClass,\n    tableColFixedClasses,\n    tableRowFixedClasses,\n    tdAlignClasses,\n    tableDraggableClasses,\n  } = useClassName();\n\n  const trStyles = getRowFixedStyles(\n    get(row, rowKey || 'id'),\n    rowIndex,\n    dataLength,\n    fixedRows,\n    rowAndColFixedPosition,\n    tableRowFixedClasses,\n  );\n\n  const trAttributes = useMemo(\n    () => formatRowAttributes(rowAttributes, { row, rowIndex, type: 'body' }) || {},\n    [row, rowAttributes, rowIndex],\n  );\n\n  const classes = useMemo(() => {\n    const customClasses = formatRowClassNames(rowClassName, { row, rowIndex, type: 'body' }, rowKey || 'id');\n    return [trStyles?.classes, customClasses];\n  }, [row, rowClassName, rowIndex, rowKey, trStyles?.classes]);\n\n  const useLazyLoadParams = useMemo(() => ({ ...scroll, rowIndex }), [scroll, rowIndex]);\n  const { hasLazyLoadHolder, tRowHeight } = useLazyLoad(tableContentElm, trRef.current, useLazyLoadParams);\n\n  function renderEllipsisCell(cellParams: BaseTableCellParams<TableRowData>, params: RenderEllipsisCellParams) {\n    const { cellNode } = params;\n    const { col } = cellParams;\n    let content = isFunction(col.ellipsis) ? col.ellipsis(cellParams) : undefined;\n    if (typeof col.ellipsis === 'object' && isFunction(col.ellipsis.content)) {\n      content = col.ellipsis.content(cellParams);\n    }\n    let tooltipProps = {};\n    if (typeof col.ellipsis === 'object') {\n      tooltipProps = 'props' in col.ellipsis ? col.ellipsis.props : col.ellipsis || undefined;\n    }\n    const tableElement = props.tableElm;\n    return (\n      <TEllipsis\n        placement={'top'}\n        attach={tableElement ? () => tableElement : undefined}\n        popupContent={content}\n        tooltipProps={tooltipProps}\n        overlayClassName={props.ellipsisOverlayClassName}\n        classPrefix={props.classPrefix}\n      >\n        {cellNode}\n      </TEllipsis>\n    );\n  }\n\n  function renderTd(params: BaseTableCellParams<TableRowData>, extra: RenderTdExtra) {\n    const { col, colIndex, rowIndex } = params;\n    const { cellSpans, dataLength, rowAndColFixedPosition } = extra;\n    const cellNode = renderCell(params, { cellEmptyContent: props.cellEmptyContent });\n    const tdStyles = getColumnFixedStyles(col, colIndex, rowAndColFixedPosition, tableColFixedClasses);\n    const customClasses = formatClassNames(col.className, { ...params, type: 'td' });\n    const classes = [\n      tdStyles.classes,\n      customClasses,\n      {\n        [tdEllipsisClass]: col.ellipsis,\n        [tableBaseClass.tdLastRow]: rowIndex + cellSpans.rowspan === dataLength,\n        [tableBaseClass.tdFirstCol]: colIndex === 0 && props.rowspanAndColspan,\n        [tdAlignClasses[col.align]]: col.align && col.align !== 'left',\n        // 标记可拖拽列\n        [tableDraggableClasses.handle]: col.colKey === 'drag',\n      },\n    ];\n    const onClick = (e: MouseEvent<HTMLTableCellElement>) => {\n      const p = { ...params, e };\n      props.onCellClick?.(p);\n    };\n    const normalAttrs = isFunction(col.attrs) ? col.attrs({ ...params, type: 'td' }) : col.attrs;\n    const attrs = { ...normalAttrs, rowSpan: cellSpans.rowspan, colSpan: cellSpans.colspan };\n    return (\n      <td\n        key={col.colKey + colIndex}\n        className={classnames(classes)}\n        style={tdStyles.style}\n        {...attrs}\n        onClick={onClick}\n      >\n        {col.ellipsis ? renderEllipsisCell(params, { cellNode }) : cellNode}\n      </td>\n    );\n  }\n\n  // const { row, rowIndex, dataLength, rowAndColFixedPosition, scrollType, isInit } = props;\n  // const hasHolder = scrollType === 'lazy' && !isInit;\n  // const rowHeightRef: Ref = inject('rowHeightRef');\n  const columnVNodeList = props.columns?.map((col, colIndex) => {\n    const cellSpans: RowspanColspan = {};\n    const params = {\n      row,\n      col,\n      rowIndex,\n      colIndex,\n    };\n    let spanState = null;\n    if (props.skipSpansMap.size) {\n      const cellKey = getCellKey(row, props.rowKey, col.colKey, colIndex);\n      spanState = props.skipSpansMap.get(cellKey) || {};\n      spanState?.rowspan > 1 && (cellSpans.rowspan = spanState.rowspan);\n      spanState?.colspan > 1 && (cellSpans.colspan = spanState.colspan);\n      if (spanState.skipped) return null;\n    }\n    return renderTd(params, {\n      dataLength,\n      rowAndColFixedPosition,\n      columnLength: props.columns.length,\n      cellSpans,\n      cellEmptyContent: props.cellEmptyContent,\n    });\n  });\n\n  const rowParams = { row, index: rowIndex };\n  return (\n    <tr\n      ref={trRef}\n      {...trAttributes}\n      style={trStyles?.style}\n      className={classnames(classes)}\n      onClick={(e) => props.onRowClick?.({ ...rowParams, e })}\n      onDoubleClick={(e) => props.onRowDblclick?.({ ...rowParams, e })}\n      onMouseDown={(e) => props.onRowMousedown?.({ ...rowParams, e })}\n      onMouseEnter={(e) => props.onRowMouseenter?.({ ...rowParams, e })}\n      onMouseLeave={(e) => props.onRowMouseleave?.({ ...rowParams, e })}\n      onMouseUp={(e) => props.onRowMouseup?.({ ...rowParams, e })}\n      onMouseOver={(e) => props.onRowMouseover?.({ ...rowParams, e })}\n    >\n      {hasLazyLoadHolder\n        ? [<td key={rowIndex} style={{ height: `${tRowHeight}px`, border: 'none' }} />]\n        : columnVNodeList}\n    </tr>\n  );\n}\n\nTR.displayName = 'TR';\n"],"names":["TABLE_PROPS","ROW_LISTENERS","renderCell","params","extra","col","row","rowIndex","colKey","isFunction","cell","render","type","r","get","includes","cellEmptyContent","TR","props","rowKey","rowClassName","rowAttributes","dataLength","fixedRows","scroll","tableContentElm","rowAndColFixedPosition","trRef","useRef","useClassName","tdEllipsisClass","tableBaseClass","tableColFixedClasses","tableRowFixedClasses","tdAlignClasses","tableDraggableClasses","trStyles","getRowFixedStyles","trAttributes","useMemo","formatRowAttributes","classes","customClasses","formatRowClassNames","useLazyLoadParams","useLazyLoad","current","hasLazyLoadHolder","tRowHeight","renderEllipsisCell","cellParams","cellNode","content","ellipsis","_typeof","tooltipProps","tableElement","tableElm","React","createElement","TEllipsis","placement","attach","popupContent","overlayClassName","ellipsisOverlayClassName","classPrefix","renderTd","colIndex","cellSpans","tdStyles","getColumnFixedStyles","formatClassNames","className","_defineProperty","tdLastRow","rowspan","tdFirstCol","rowspanAndColspan","align","handle","onClick","e","p","onCellClick","normalAttrs","attrs","rowSpan","colSpan","colspan","key","classnames","style","columnVNodeList","columns","map","spanState","skipSpansMap","size","cellKey","getCellKey","skipped","columnLength","length","rowParams","index","ref","onRowClick","onDoubleClick","onRowDblclick","onMouseDown","onRowMousedown","onMouseEnter","onRowMouseenter","onMouseLeave","onRowMouseleave","onMouseUp","onRowMouseup","onMouseOver","onRowMouseover","height","border","displayName"],"mappings":"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"}