{"version":3,"file":"TooltipLite.js","sources":["../../src/tooltip/TooltipLite.tsx"],"sourcesContent":["import React, { ReactNode, useState, useRef, useEffect } from 'react';\nimport classnames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { StyledProps } from '../common';\nimport useSwitch from '../_util/useSwitch';\nimport useAnimation from '../_util/useAnimation';\nimport Portal from '../common/Portal';\nimport useConfig from '../hooks/useConfig';\nimport getPosition from '../_common/js/utils/getPosition';\nimport { TdTooltipLiteProps } from './type';\nimport { tooltipLiteDefaultProps } from './defaultProps';\nimport { getTransitionParams } from '../popup/utils/transition';\n\nexport interface TooltipLiteProps extends TdTooltipLiteProps, StyledProps {\n  children?: ReactNode;\n}\n\nconst DEFAULT_TRANSITION_TIMEOUT = 180;\n\nconst TooltipLite: React.FC<TooltipLiteProps> = (props) => {\n  const { style, className, placement, showArrow, theme, children, triggerElement, content, showShadow } = props;\n  const triggerRef = useRef(null);\n  const contentRef = useRef(null);\n  const popupRef = useRef(null);\n  const { classPrefix } = useConfig();\n  const [hover, hoverAction] = useSwitch();\n  const [position, setPosition] = useState(null);\n  const { keepFade } = useAnimation();\n\n  useEffect(() => {\n    if (triggerRef.current && contentRef.current) {\n      setPosition(getPosition(triggerRef.current, contentRef.current, placement));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [triggerRef.current, contentRef.current, placement, hover]);\n\n  const getTriggerChildren = (children) => {\n    const appendProps = {\n      ref: triggerRef,\n      onMouseEnter: hoverAction.on,\n      onMouseLeave: hoverAction.off,\n    };\n    if (!React.isValidElement(children)) {\n      return React.cloneElement(<div>{children}</div>, { ...appendProps });\n    }\n    return React.cloneElement(children, { ...appendProps });\n  };\n\n  return (\n    <div>\n      {getTriggerChildren(children || triggerElement)}\n      {hover && (\n        <Portal>\n          <CSSTransition\n            appear\n            timeout={{\n              appear: DEFAULT_TRANSITION_TIMEOUT,\n            }}\n            in={hover}\n            nodeRef={popupRef}\n            {...getTransitionParams({\n              classPrefix,\n              fadeAnimation: keepFade,\n            })}\n          >\n            <div\n              className={classnames(\n                `${classPrefix}-popup`,\n                `${classPrefix}-tooltip`,\n                {\n                  [`${classPrefix}-tooltip--${theme}`]: theme,\n                  [`${classPrefix}-tooltip--noshadow`]: !showShadow,\n                },\n                className,\n              )}\n              data-popper-placement={placement}\n              ref={popupRef}\n            >\n              <div\n                className={classnames(`${classPrefix}-popup__content`, {\n                  [`${classPrefix}-popup__content--arrow`]: showArrow,\n                })}\n                style={{\n                  position: 'absolute',\n                  left: position?.left,\n                  top: position?.top,\n                  ...style,\n                }}\n                ref={contentRef}\n              >\n                {content}\n                {showArrow && <div className={`${classPrefix}-popup__arrow`} />}\n              </div>\n            </div>\n          </CSSTransition>\n        </Portal>\n      )}\n    </div>\n  );\n};\n\nTooltipLite.displayName = 'Tooltiplite';\nTooltipLite.defaultProps = tooltipLiteDefaultProps;\n\nexport default React.memo(TooltipLite);\n"],"names":["DEFAULT_TRANSITION_TIMEOUT","TooltipLite","props","style","className","placement","showArrow","theme","children","triggerElement","content","showShadow","triggerRef","useRef","contentRef","popupRef","useConfig","classPrefix","useSwitch","hover","hoverAction","useState","position","setPosition","useAnimation","keepFade","useEffect","current","getPosition","getTriggerChildren","appendProps","ref","onMouseEnter","on","onMouseLeave","off","React","isValidElement","cloneElement","createElement","Portal","CSSTransition","appear","timeout","nodeRef","getTransitionParams","fadeAnimation","classnames","left","top","displayName","defaultProps","tooltipLiteDefaultProps","memo"],"mappings":"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"}