{"version":3,"file":"Header.js","sources":["../../../src/date-picker/base/Header.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport Select from '../../select';\nimport { TdDatePickerProps } from '../type';\nimport Jumper, { TdJumperProps } from '../../jumper';\n\nexport interface DatePickerHeaderProps extends Pick<TdDatePickerProps, 'mode'> {\n  year?: number;\n  month?: number;\n  onMonthChange?: Function;\n  onYearChange?: Function;\n  onJumperClick?: TdJumperProps['onChange'];\n}\n\nconst useDatePickerLocalConfig = () => {\n  const [local, t] = useLocaleReceiver('datePicker');\n\n  return {\n    months: t(local.months),\n    nextYear: t(local.nextYear),\n    preYear: t(local.preYear),\n    nextMonth: t(local.nextMonth),\n    preMonth: t(local.preMonth),\n    preDecade: t(local.preDecade),\n    nextDecade: t(local.nextDecade),\n    now: t(local.now),\n  };\n};\n\nconst DatePickerHeader = (props: DatePickerHeaderProps) => {\n  const { classPrefix } = useConfig();\n\n  const { mode, year, month, onMonthChange, onYearChange, onJumperClick } = props;\n\n  const { now, months, preMonth, preYear, nextMonth, nextYear, preDecade, nextDecade } = useDatePickerLocalConfig();\n\n  const scrollAnchorRef = useRef('default');\n\n  const monthOptions = months.map((item: string, index: number) => ({ label: item, value: index }));\n\n  const initOptions = useCallback(\n    (year: number) => {\n      const options = [];\n      if (mode === 'year') {\n        const extraYear = year % 10;\n        const minYear = year - extraYear - 100;\n        const maxYear = year - extraYear + 100;\n\n        for (let i = minYear; i <= maxYear; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i + extraYear });\n        }\n      } else {\n        options.push({ label: `${year}`, value: year });\n\n        for (let i = 1; i <= 10; i++) {\n          options.push({ label: `${year + i}`, value: year + i });\n          options.unshift({ label: `${year - i}`, value: year - i });\n        }\n      }\n\n      return options;\n    },\n    [mode],\n  );\n  const [yearOptions, setYearOptions] = useState(initOptions(year));\n\n  // 年份选择展示区间\n  const nearestYear: number = useMemo(\n    () => yearOptions.find((option) => option.value - year <= 9 && option.value - year >= 0)?.value || year,\n    [yearOptions, year],\n  );\n\n  useEffect(() => {\n    const yearRange = initOptions(year);\n    setYearOptions(yearRange);\n  }, [initOptions, year]);\n\n  function loadMoreYear(year: number, type?: 'add' | 'reduce') {\n    const options = [];\n    if (mode === 'year') {\n      const extraYear = year % 10;\n      if (type === 'add') {\n        for (let i = year - extraYear + 10; i <= year - extraYear + 50; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i });\n        }\n      } else {\n        for (let i = year - extraYear - 1; i > year - extraYear - 50; i -= 10) {\n          options.unshift({ label: `${i - 9} - ${i}`, value: i });\n        }\n      }\n    } else if (type === 'add') {\n      for (let i = year + 1; i <= year + 10; i++) {\n        options.push({ label: `${i}`, value: i });\n      }\n    } else {\n      for (let i = year - 1; i > year - 10; i--) {\n        options.unshift({ label: `${i}`, value: i });\n      }\n    }\n\n    return options;\n  }\n\n  // hover title\n  const labelMap = {\n    year: {\n      prev: preDecade,\n      current: now,\n      next: nextDecade,\n    },\n    month: {\n      prev: preYear,\n      current: now,\n      next: nextYear,\n    },\n    date: {\n      prev: preMonth,\n      current: now,\n      next: nextMonth,\n    },\n  };\n\n  const headerClassName = `${classPrefix}-date-picker__header`;\n  const showMonthPicker = mode === 'date' || mode === 'week';\n\n  function handlePanelTopClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation?.();\n\n    const firstYear = yearOptions[0].value;\n    const options = loadMoreYear(firstYear, 'reduce');\n    setYearOptions([...options, ...yearOptions]);\n  }\n\n  function handlePanelBottomClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation();\n\n    const lastYear = yearOptions.slice(-1)[0].value;\n    const options = loadMoreYear(lastYear, 'add');\n    setYearOptions([...yearOptions, ...options]);\n  }\n\n  // 滚动顶部底部自动加载\n  function handleScroll({ e }) {\n    if (e.target.scrollTop === 0) {\n      handlePanelTopClick();\n      scrollAnchorRef.current = 'top';\n    } else if (e.target.scrollTop === e.target.scrollHeight - e.target.clientHeight) {\n      handlePanelBottomClick();\n      scrollAnchorRef.current = 'bottom';\n    }\n  }\n\n  function handleUpdateScrollTop(content: HTMLElement) {\n    if (scrollAnchorRef.current === 'top') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = 30 * 10;\n    } else if (scrollAnchorRef.current === 'bottom') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = content.scrollHeight - 30 * 10;\n    } else {\n      const firstSelectedNode: HTMLDivElement = content.querySelector(`.${classPrefix}-is-selected`);\n\n      if (firstSelectedNode) {\n        const { paddingBottom } = getComputedStyle(firstSelectedNode);\n        const { marginBottom } = getComputedStyle(content);\n        const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n        // 小于0时不需要特殊处理，会被设为0\n        const updateValue =\n          firstSelectedNode.offsetTop -\n          content.offsetTop -\n          (content.clientHeight - firstSelectedNode.clientHeight) +\n          elementBottomHeight;\n        // eslint-disable-next-line no-param-reassign\n        content.scrollTop = updateValue;\n      }\n    }\n  }\n\n  return (\n    <div className={headerClassName}>\n      <div className={`${headerClassName}-controller`}>\n        {showMonthPicker && (\n          <Select\n            className={`${headerClassName}-controller-month`}\n            value={month}\n            options={monthOptions}\n            onChange={(val) => onMonthChange(val)}\n            popupProps={{\n              attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n              overlayClassName: `${headerClassName}-controller-month-popup`,\n            }}\n          />\n        )}\n        <Select\n          className={`${headerClassName}-controller-year`}\n          value={mode === 'year' ? nearestYear : year}\n          options={yearOptions}\n          onChange={(val) => onYearChange(val)}\n          onPopupVisibleChange={(visible) => {\n            if (!visible) scrollAnchorRef.current = 'default';\n          }}\n          popupProps={{\n            onScroll: handleScroll,\n            updateScrollTop: handleUpdateScrollTop,\n            attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n            overlayClassName: `${headerClassName}-controller-year-popup`,\n          }}\n          panelTopContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelTopClick}>\n              ...\n            </div>\n          }\n          panelBottomContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelBottomClick}>\n              ...\n            </div>\n          }\n        />\n      </div>\n\n      <Jumper tips={labelMap[mode]} size=\"small\" onChange={onJumperClick} />\n    </div>\n  );\n};\n\nDatePickerHeader.displayName = 'DatePickerHeader';\n\nexport default DatePickerHeader;\n"],"names":["useDatePickerLocalConfig","useLocaleReceiver","local","t","months","nextYear","preYear","nextMonth","preMonth","preDecade","nextDecade","now","DatePickerHeader","props","useConfig","classPrefix","mode","year","month","onMonthChange","onYearChange","onJumperClick","scrollAnchorRef","useRef","monthOptions","map","item","index","label","value","initOptions","useCallback","options","extraYear","minYear","maxYear","i","push","unshift","useState","yearOptions","setYearOptions","nearestYear","useMemo","find","option","useEffect","yearRange","loadMoreYear","type","labelMap","prev","current","next","date","headerClassName","showMonthPicker","handlePanelTopClick","e","stopPropagation","nativeEvent","stopImmediatePropagation","firstYear","handlePanelBottomClick","lastYear","slice","handleScroll","target","scrollTop","scrollHeight","clientHeight","handleUpdateScrollTop","content","firstSelectedNode","querySelector","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","React","createElement","className","Select","onChange","val","popupProps","attach","triggerElement","parentNode","overlayClassName","onPopupVisibleChange","visible","onScroll","updateScrollTop","panelTopContent","onClick","panelBottomContent","Jumper","tips","size","displayName"],"mappings":"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"}