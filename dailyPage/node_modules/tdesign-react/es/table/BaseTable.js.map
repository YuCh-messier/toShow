{"version":3,"file":"BaseTable.js","sources":["../../src/table/BaseTable.tsx"],"sourcesContent":["import React, { useRef, useMemo, useImperativeHandle, forwardRef, useEffect, useState, WheelEvent } from 'react';\nimport pick from 'lodash/pick';\nimport classNames from 'classnames';\nimport TBody, { extendTableProps } from './TBody';\nimport { Affix } from '../affix';\nimport { ROW_LISTENERS } from './TR';\nimport THead from './THead';\nimport TFoot from './TFoot';\nimport useTableHeader from './hooks/useTableHeader';\nimport useColumnResize from './hooks/useColumnResize';\nimport useFixed from './hooks/useFixed';\nimport useAffix from './hooks/useAffix';\nimport usePagination from './hooks/usePagination';\nimport Loading from '../loading';\nimport { BaseTableProps, BaseTableRef } from './interface';\nimport useStyle, { formatCSSUnit } from './hooks/useStyle';\nimport useClassName from './hooks/useClassName';\nimport { getAffixProps } from './utils';\nimport log from '../_common/js/log';\nimport { baseTableDefaultProps } from './defaultProps';\n\nimport { Styles } from '../common';\nimport { TableRowData } from './type';\n\nexport const BASE_TABLE_EVENTS = ['page-change', 'cell-click', 'scroll', 'scrollX', 'scrollY'];\nexport const BASE_TABLE_ALL_EVENTS = ROW_LISTENERS.map((t) => `row-${t}`).concat(BASE_TABLE_EVENTS);\n\nexport interface TableListeners {\n  [key: string]: Function;\n}\n\nconst BaseTable = forwardRef<BaseTableRef, BaseTableProps>((props, ref) => {\n  const { tableLayout, height, data, columns, style, headerAffixedTop, bordered, resizable } = props;\n  const tableRef = useRef<HTMLDivElement>();\n  const tableElmRef = useRef<HTMLTableElement>();\n  const [tableFootHeight, setTableFootHeight] = useState(0);\n  const { classPrefix, virtualScrollClasses, tableLayoutClasses, tableBaseClass, tableColFixedClasses } =\n    useClassName();\n  // 表格基础样式类\n  const { tableClasses, sizeClassNames, tableContentStyles, tableElementStyles } = useStyle(props);\n  const { isMultipleHeader, spansAndLeafNodes, thList } = useTableHeader({ columns: props.columns });\n  const finalColumns = useMemo(\n    () => spansAndLeafNodes?.leafColumns || columns,\n    [spansAndLeafNodes?.leafColumns, columns],\n  );\n\n  // 固定表头和固定列逻辑\n  const {\n    scrollbarWidth,\n    tableWidth,\n    tableElmWidth,\n    tableContentRef,\n    isFixedHeader,\n    isWidthOverflow,\n    isFixedColumn,\n    thWidthList,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    setData,\n    refreshTable,\n    emitScrollEvent,\n    setUseFixedTableElmRef,\n    updateColumnFixedShadow,\n    getThWidthList,\n    updateThWidthList,\n    setRecalculateColWidthFuncRef,\n    addTableResizeObserver,\n  } = useFixed(props, finalColumns);\n\n  // 1. 表头吸顶；2. 表尾吸底；3. 底部滚动条吸底；4. 分页器吸底\n  const {\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  } = useAffix(props);\n\n  const { dataSource, isPaginateData, renderPagination } = usePagination(props);\n\n  // 列宽拖拽逻辑\n  const columnResizeParams = useColumnResize(tableContentRef, refreshTable, getThWidthList, updateThWidthList);\n  const { resizeLineRef, resizeLineStyle, recalculateColWidth, setEffectColMap } = columnResizeParams;\n  setRecalculateColWidthFuncRef(recalculateColWidth);\n\n  const dynamicBaseTableClasses = classNames(\n    tableClasses.concat({\n      [tableBaseClass.headerFixed]: isFixedHeader,\n      [tableBaseClass.columnFixed]: isFixedColumn,\n      [tableBaseClass.widthOverflow]: isWidthOverflow,\n      [tableBaseClass.multipleHeader]: isMultipleHeader,\n      [tableColFixedClasses.leftShadow]: showColumnShadow.left,\n      [tableColFixedClasses.rightShadow]: showColumnShadow.right,\n      [tableBaseClass.columnResizableTable]: props.resizable,\n    }),\n  );\n\n  const tableElmClasses = classNames([\n    [tableLayoutClasses[tableLayout || 'fixed']],\n    { [tableBaseClass.fullHeight]: height },\n  ]);\n\n  const isVirtual = useMemo(\n    () => props.scroll?.type === 'virtual' && props.data?.length > (props.scroll?.threshold || 100),\n    [props.data?.length, props.scroll?.threshold, props.scroll?.type],\n  );\n\n  const showRightDivider = useMemo(\n    () => props.bordered && isFixedHeader && ((isMultipleHeader && isWidthOverflow) || !isMultipleHeader),\n    [isFixedHeader, isMultipleHeader, isWidthOverflow, props.bordered],\n  );\n\n  useEffect(() => {\n    setUseFixedTableElmRef(tableElmRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableElmRef]);\n\n  useEffect(() => {\n    setData(isPaginateData ? dataSource : props.data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.data, dataSource, isPaginateData]);\n\n  const [lastLeafColumns, setLastLeafColumns] = useState(props.columns || []);\n  useEffect(() => {\n    if (lastLeafColumns.map((t) => t.colKey).join() !== spansAndLeafNodes.leafColumns.map((t) => t.colKey).join()) {\n      props.onLeafColumnsChange?.(spansAndLeafNodes.leafColumns);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      setLastLeafColumns(spansAndLeafNodes.leafColumns);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [spansAndLeafNodes.leafColumns]);\n\n  useEffect(() => {\n    setEffectColMap(thList[0], null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [thList]);\n\n  useImperativeHandle(ref, () => ({\n    tableElement: tableRef.current,\n    tableHtmlElement: tableElmRef.current,\n    tableContentElement: tableContentRef.current,\n    affixHeaderElement: affixHeaderRef.current,\n    refreshTable,\n  }));\n\n  const onFixedChange = () => {\n    const timer = setTimeout(() => {\n      onHorizontalScroll();\n      updateAffixHeaderOrFooter();\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  let lastScrollY = 0;\n  const onInnerVirtualScroll = (e: WheelEvent<HTMLDivElement>) => {\n    const target = e.target as HTMLElement;\n    const top = target.scrollTop;\n    // 排除横向滚动出发的纵向虚拟滚动计算\n    if (lastScrollY !== top) {\n      // TODO\n      // isVirtual.value && handleVirtualScroll();\n    } else {\n      lastScrollY = 0;\n      updateColumnFixedShadow(target);\n    }\n    lastScrollY = top;\n    emitScrollEvent(e);\n  };\n\n  // used for top margin\n  const getTFootHeight = () => {\n    if (!tableElmRef.current) return;\n    const timer = setTimeout(() => {\n      const height = tableElmRef.current?.querySelector('tfoot')?.getBoundingClientRect().height;\n      setTableFootHeight(height);\n      clearTimeout(timer);\n    });\n  };\n\n  useEffect(() => {\n    setTableContentRef(tableContentRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef]);\n\n  useEffect(\n    () => addTableResizeObserver(tableRef.current),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tableRef],\n  );\n\n  useEffect(getTFootHeight, [tableElmRef]);\n\n  const newData = isPaginateData ? dataSource : data;\n\n  if (resizable && tableLayout === 'auto') {\n    log.warn('Table', 'table-layout can not be `auto` for resizable column table, set `table-layout: fixed` please.');\n  }\n\n  const defaultColWidth = props.tableLayout === 'fixed' && isWidthOverflow ? '100px' : undefined;\n  const colgroup = (\n    <colgroup>\n      {finalColumns.map((col) => {\n        const style: Styles = { width: formatCSSUnit(thWidthList.current[col.colKey] || col.width) || defaultColWidth };\n        if (col.minWidth) {\n          style.minWidth = formatCSSUnit(col.minWidth);\n        }\n        return <col key={col.colKey} style={style} />;\n      })}\n    </colgroup>\n  );\n\n  const headProps = {\n    isFixedHeader,\n    rowAndColFixedPosition,\n    isMultipleHeader,\n    bordered: props.bordered,\n    spansAndLeafNodes,\n    thList,\n    thWidthList: thWidthList.current,\n    resizable: props.resizable,\n    columnResizeParams,\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n  };\n\n  // 多级表头左边线缺失\n  const affixedLeftBorder = props.bordered ? 1 : 0;\n\n  /**\n   * Affixed Header\n   */\n  const renderFixedHeader = () => {\n    // onlyVirtualScrollBordered 用于浏览器兼容性处理，只有 chrome 需要调整 bordered，FireFox 和 Safari 不需要\n    const onlyVirtualScrollBordered =\n      !!(isVirtual && !headerAffixedTop && bordered) && /Chrome/.test(navigator?.userAgent);\n    const borderWidth = bordered && onlyVirtualScrollBordered ? 1 : 0;\n    const affixHeaderWrapHeight =\n      (affixHeaderRef.current?.getBoundingClientRect().height || 0) - scrollbarWidth - borderWidth;\n    // 两类场景：1. 虚拟滚动，永久显示表头，直到表头消失在可视区域； 2. 表头吸顶，根据滚动情况判断是否显示吸顶表头\n    const headerOpacity = headerAffixedTop ? Number(showAffixHeader) : 1;\n    const affixHeaderWrapHeightStyle = {\n      width: `${tableWidth.current}px`,\n      height: `${affixHeaderWrapHeight}px`,\n      opacity: headerOpacity,\n      marginTop: onlyVirtualScrollBordered ? `${borderWidth}px` : 0,\n    };\n    const affixedHeader = Boolean(props.headerAffixedTop && tableWidth.current) && (\n      <div\n        ref={affixHeaderRef}\n        style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: headerOpacity }}\n        className={classNames([\n          'scrollbar',\n          { [tableBaseClass.affixedHeaderElm]: props.headerAffixedTop || isVirtual },\n        ])}\n      >\n        <table\n          className={classNames(tableElmClasses)}\n          style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}\n        >\n          {colgroup}\n          {props.showHeader && <THead {...headProps} />}\n        </table>\n      </div>\n    );\n\n    // 添加这一层，是为了隐藏表头的横向滚动条。如果以后不需要照顾 IE 10 以下的项目，则可直接移除这一层\n    // 彼时，可更为使用 CSS 样式中的 .hideScrollbar()\n    const affixHeaderWithWrap = (\n      <div className={tableBaseClass.affixedHeaderWrap} style={affixHeaderWrapHeightStyle}>\n        {affixedHeader}\n      </div>\n    );\n    return affixHeaderWithWrap;\n  };\n\n  const renderAffixedHeader = () => {\n    if (!props.showHeader) return null;\n    return (\n      !!(isVirtual || props.headerAffixedTop) &&\n      (props.headerAffixedTop ? (\n        <Affix\n          offsetTop={0}\n          {...getAffixProps(props.headerAffixedTop, props.headerAffixProps)}\n          onFixedChange={onFixedChange}\n        >\n          {renderFixedHeader()}\n        </Affix>\n      ) : (\n        isFixedHeader && renderFixedHeader()\n      ))\n    );\n  };\n\n  /**\n   * Affixed Footer\n   */\n  const renderAffixedFooter = () => {\n    let marginScrollbarWidth = isWidthOverflow ? scrollbarWidth : 0;\n    if (bordered) {\n      marginScrollbarWidth += 1;\n    }\n    // Hack: Affix 组件，marginTop 临时使用 负 margin 定位位置\n    const affixedFooter = Boolean(props.footerAffixedBottom && props.footData?.length && tableWidth.current) && (\n      <Affix\n        className={tableBaseClass.affixedFooterWrap}\n        onFixedChange={onFixedChange}\n        offsetBottom={marginScrollbarWidth || 0}\n        {...getAffixProps(props.footerAffixedBottom)}\n        style={{ marginTop: `${-1 * (tableFootHeight + marginScrollbarWidth)}px` }}\n      >\n        <div\n          ref={affixFooterRef}\n          style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: Number(showAffixFooter) }}\n          className={classNames([\n            'scrollbar',\n            { [tableBaseClass.affixedFooterElm]: props.footerAffixedBottom || isVirtual },\n          ])}\n        >\n          <table className={tableElmClasses} style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}>\n            {colgroup}\n            <TFoot\n              rowKey={props.rowKey}\n              isFixedHeader={isFixedHeader}\n              rowAndColFixedPosition={rowAndColFixedPosition}\n              footData={props.footData}\n              columns={spansAndLeafNodes?.leafColumns || columns}\n              rowAttributes={props.rowAttributes}\n              rowClassName={props.rowClassName}\n              thWidthList={thWidthList.current}\n              footerSummary={props.footerSummary}\n              rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n            ></TFoot>\n          </table>\n        </div>\n      </Affix>\n    );\n    return affixedFooter;\n  };\n\n  const translate = `translate(0, ${0}px)`;\n  const virtualStyle = {\n    transform: translate,\n    '-ms-transform': translate,\n    '-moz-transform': translate,\n    '-webkit-transform': translate,\n  };\n  const tableBodyProps = {\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n    rowAndColFixedPosition,\n    showColumnShadow,\n    // data: isVirtual ? visibleData : data,\n    data: newData,\n    columns: spansAndLeafNodes?.leafColumns || columns,\n    tableElm: tableRef.current,\n    tableContentElm: tableContentRef.current,\n    tableWidth: tableWidth.current,\n    isWidthOverflow,\n    rowKey: props.rowKey || 'id',\n    // 虚拟滚动相关属性\n    // isVirtual,\n    // translateY: translateY,\n    // scrollType: scrollType,\n    // rowHeight: rowHeight,\n    // trs: trs,\n    // bufferSize: bufferSize,\n    scroll: props.scroll,\n    // handleRowMounted: handleRowMounted,\n    cellEmptyContent: props.cellEmptyContent,\n    renderExpandedRow: props.renderExpandedRow,\n    ...pick(props, extendTableProps),\n  };\n  const tableContent = (\n    <div\n      ref={tableContentRef}\n      className={tableBaseClass.content}\n      style={tableContentStyles}\n      onScroll={onInnerVirtualScroll}\n    >\n      {isVirtual && <div className={virtualScrollClasses.cursor} style={virtualStyle} />}\n      <table ref={tableElmRef} className={classNames(tableElmClasses)} style={tableElementStyles}>\n        {colgroup}\n        {props.showHeader && <THead {...headProps} />}\n        <TBody {...tableBodyProps} />\n        <TFoot\n          rowKey={props.rowKey}\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          footData={props.footData}\n          columns={spansAndLeafNodes?.leafColumns || columns}\n          rowAttributes={props.rowAttributes}\n          rowClassName={props.rowClassName}\n          thWidthList={thWidthList.current}\n          footerSummary={props.footerSummary}\n          rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n        ></TFoot>\n      </table>\n    </div>\n  );\n\n  const { loading, loadingProps } = props;\n  const customLoadingText = loading;\n  const loadingContent = loading !== undefined && (\n    <Loading\n      loading={!!loading}\n      text={customLoadingText}\n      attach={() => tableRef.current}\n      showOverlay\n      size=\"small\"\n      {...loadingProps}\n    ></Loading>\n  );\n\n  const { topContent, bottomContent } = props;\n  const pagination = (\n    <div ref={paginationRef} className={tableBaseClass.paginationWrap} style={{ opacity: Number(showAffixPagination) }}>\n      {renderPagination()}\n    </div>\n  );\n  const bottom = !!bottomContent && <div className={tableBaseClass.bottomContent}>{bottomContent}</div>;\n\n  return (\n    <div ref={tableRef} className={classNames(dynamicBaseTableClasses)} style={{ position: 'relative', ...style }}>\n      {!!topContent && <div className={tableBaseClass.topContent}>{topContent}</div>}\n\n      {renderAffixedHeader()}\n\n      {tableContent}\n\n      {renderAffixedFooter()}\n\n      {loadingContent}\n\n      {showRightDivider && (\n        <div\n          className={tableBaseClass.scrollbarDivider}\n          style={{\n            right: `${scrollbarWidth}px`,\n            height: `${tableContentRef.current?.getBoundingClientRect().height}px`,\n          }}\n        ></div>\n      )}\n\n      {bottom}\n\n      {/* 吸底的滚动条 */}\n      {props.horizontalScrollAffixedBottom && (\n        <Affix\n          offsetBottom={0}\n          {...getAffixProps(props.horizontalScrollAffixedBottom)}\n          style={{ marginTop: `-${scrollbarWidth * 2}px` }}\n        >\n          <div\n            ref={horizontalScrollbarRef}\n            className={classNames(['scrollbar', tableBaseClass.obviousScrollbar])}\n            style={{\n              width: `${tableWidth.current}px`,\n              overflow: 'auto',\n              opacity: Number(showAffixFooter),\n            }}\n          >\n            <div style={{ width: `${tableElmWidth.current}px`, height: '5px' }}></div>\n          </div>\n        </Affix>\n      )}\n\n      {/* 吸底的分页器 */}\n      {props.paginationAffixedBottom ? (\n        <Affix offsetBottom={0} {...getAffixProps(props.paginationAffixedBottom)}>\n          {pagination}\n        </Affix>\n      ) : (\n        pagination\n      )}\n\n      {/* 调整列宽时的指示线。由于层级需要比较高，因而放在根节点，避免被吸顶表头覆盖。非必要情况，请勿调整辅助线位置 */}\n      <div ref={resizeLineRef} className={tableBaseClass.resizeLine} style={resizeLineStyle}></div>\n    </div>\n  );\n});\n\nBaseTable.displayName = 'BaseTable';\n\nBaseTable.defaultProps = baseTableDefaultProps;\n\nexport default BaseTable as <T extends TableRowData = TableRowData>(\n  props: BaseTableProps<T> & {\n    ref?: React.Ref<BaseTableRef>;\n  },\n) => React.ReactElement;\n"],"names":["BASE_TABLE_EVENTS","BASE_TABLE_ALL_EVENTS","ROW_LISTENERS","map","t","concat","BaseTable","forwardRef","props","ref","tableLayout","height","data","columns","style","headerAffixedTop","bordered","resizable","tableRef","useRef","tableElmRef","useState","tableFootHeight","setTableFootHeight","useClassName","classPrefix","virtualScrollClasses","tableLayoutClasses","tableBaseClass","tableColFixedClasses","useStyle","tableClasses","sizeClassNames","tableContentStyles","tableElementStyles","useTableHeader","isMultipleHeader","spansAndLeafNodes","thList","finalColumns","useMemo","leafColumns","useFixed","scrollbarWidth","tableWidth","tableElmWidth","tableContentRef","isFixedHeader","isWidthOverflow","isFixedColumn","thWidthList","showColumnShadow","rowAndColFixedPosition","setData","refreshTable","emitScrollEvent","setUseFixedTableElmRef","updateColumnFixedShadow","getThWidthList","updateThWidthList","setRecalculateColWidthFuncRef","addTableResizeObserver","useAffix","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","onHorizontalScroll","setTableContentRef","updateAffixHeaderOrFooter","usePagination","dataSource","isPaginateData","renderPagination","columnResizeParams","useColumnResize","resizeLineRef","resizeLineStyle","recalculateColWidth","setEffectColMap","dynamicBaseTableClasses","classNames","headerFixed","columnFixed","widthOverflow","multipleHeader","leftShadow","left","rightShadow","right","columnResizableTable","tableElmClasses","fullHeight","isVirtual","scroll","type","length","threshold","showRightDivider","useEffect","current","lastLeafColumns","setLastLeafColumns","colKey","join","onLeafColumnsChange","useImperativeHandle","tableElement","tableHtmlElement","tableContentElement","affixHeaderElement","onFixedChange","timer","setTimeout","clearTimeout","lastScrollY","onInnerVirtualScroll","e","target","top","scrollTop","getTFootHeight","querySelector","getBoundingClientRect","newData","log","warn","defaultColWidth","colgroup","React","createElement","col","width","formatCSSUnit","minWidth","key","headProps","ellipsisOverlayClassName","size","affixedLeftBorder","renderFixedHeader","onlyVirtualScrollBordered","test","navigator","userAgent","borderWidth","affixHeaderWrapHeight","headerOpacity","Number","affixHeaderWrapHeightStyle","opacity","marginTop","affixedHeader","Boolean","className","affixedHeaderElm","showHeader","THead","affixHeaderWithWrap","affixedHeaderWrap","renderAffixedHeader","Affix","offsetTop","getAffixProps","headerAffixProps","renderAffixedFooter","marginScrollbarWidth","affixedFooter","footerAffixedBottom","footData","affixedFooterWrap","offsetBottom","affixedFooterElm","TFoot","rowKey","rowAttributes","rowClassName","footerSummary","rowspanAndColspanInFooter","translate","virtualStyle","transform","tableBodyProps","tableElm","tableContentElm","cellEmptyContent","renderExpandedRow","pick","extendTableProps","tableContent","content","onScroll","cursor","TBody","loading","loadingProps","customLoadingText","loadingContent","Loading","text","attach","showOverlay","topContent","bottomContent","pagination","paginationWrap","bottom","position","scrollbarDivider","horizontalScrollAffixedBottom","obviousScrollbar","overflow","paginationAffixedBottom","resizeLine","displayName","defaultProps","baseTableDefaultProps"],"mappings":"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"}